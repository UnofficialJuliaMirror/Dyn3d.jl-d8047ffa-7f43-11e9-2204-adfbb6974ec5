<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Fluid-Structure Interaction · Dyn3d.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Dyn3d.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="construct_system.html">Construct body-joint system</a></li><li class="current"><a class="toctext" href="fluid_interaction.html">Fluid-Structure Interaction</a><ul class="internal"><li><a class="toctext" href="#Strongly-coupled-method-1">Strongly coupled method</a></li><li><a class="toctext" href="#Fully-coupled-method-1">Fully coupled method</a></li><li><a class="toctext" href="#Methods-1">Methods</a></li><li><a class="toctext" href="#Index-1">Index</a></li></ul></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href="fluid_interaction.html">Fluid-Structure Interaction</a></li></ul><a class="edit-page" href="https://github.com/ruizhi92/Dyn3d.jl/blob/master/docs/src/manual/fluid_interaction.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Fluid-Structure Interaction</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Fluid-Structure-Interaction-1" href="#Fluid-Structure-Interaction-1">Fluid-Structure Interaction</a></h1><div>\[\def\ddt#1{\frac{\mathrm{d}#1}{\mathrm{d}t}}\]</div><div></div><p><code>Dyn3d</code> can be used to solve rigid body dynamics, to simulate fluid-structure interaction, we use <a href="https://github.com/ruizhi92/Whirl.jl.git">Whirl.jl</a> branch <code>stronglycoupled2d</code> to solve for fluid dynamics. To make fluid and body dynamics coupling with each other, we also need to construct a series of functions to act as interface between them, and choose appropriate coupling schemes.</p><p>Strongly coupled method is finished, and fully coupled method is under construction. Example of working fluid-structure interaction notebook is also provided under /notebook.</p><h2><a class="nav-anchor" id="Strongly-coupled-method-1" href="#Strongly-coupled-method-1">Strongly coupled method</a></h2><p>Coupling scheme is refered to <a href="https://www.sciencedirect.com/science/article/pii/S0021999115002454">Wang and Eldredge JCP</a>, detailes are skipped here. The main idea is to use fluid forces on body as the iterating variable, run the body solver <code>Dyn3d</code> with proposed fluid force as external force for the body-joint system, get updated body coordinates and velocities. Then use these information as boundary condition for fluid solver <code>Whirl</code>, get updated fluid force on body from Lagrange multipliers. If the proposed force and updated force are close enough, this timestep is said to be converged. Otherwise we use a relaxation scheme to calculate a new proposed force, iterates until it converge.</p><p>There are several things that needs to be carefully dealt with, because we are using two packages together and variables need to be consistent from one to another.</p><h3><a class="nav-anchor" id="Scaling-1" href="#Scaling-1">Scaling</a></h3><p>For example gravity in body solver should be non-dimensionalized to <span>$[0.0, -1.0, 0.0]$</span> instead of <span>$[0.0, -9.8, 0.0]$</span>. Scaling is done through:</p><p>mass ratio <span>$m^* = \frac{\rho_{b}/L}{\rho_{f}} = \frac{\rho_{b}}{\rho_{f} L}$</span></p><p>Reynolds number <span>$Re = \frac{\rho_{f} U_\infty L}{\mu}$</span></p><p>torsion stiffness <span>$k^* = \frac{k}{\rho_{f} {U_\infty}^2 {L}^2}$</span></p><p>bending stiffness <span>$c^* = \frac{c}{\rho_{f} U_\infty {L}^3}$</span></p><p>gravity <span>$g^* = \frac{g L}{{U_\infty}^2}$</span> if uniform flow is non-zero</p><h2><a class="nav-anchor" id="Fully-coupled-method-1" href="#Fully-coupled-method-1">Fully coupled method</a></h2><p>Under construction</p><h2><a class="nav-anchor" id="Methods-1" href="#Methods-1">Methods</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dyn3d.FluidInteraction.BodyGrid" href="#Dyn3d.FluidInteraction.BodyGrid"><code>Dyn3d.FluidInteraction.BodyGrid</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">BodyGrid(bid::Int, np::Int, points, q_i, f_ex3d, f_ex6d)</code></pre><p>Design this structure to contain body points coord, motion and forces used in fluid-structure interaction</p><p><strong>Fields</strong></p><ul><li><p><code>bid</code>: body id in the joint-body chain</p></li><li><p><code>np</code>: number of grid points on this body</p></li><li><p><code>points</code>: (x,y,z) coordinates of all body points in local body frame</p></li><li><p><code>q_i</code>: (x,y,z) coordinates of all body points in inertial frame</p></li><li><p><code>v_i</code>: velocity of all body points in inertial frame</p></li><li><p><code>f_ex3d</code>: external force(fluid force) on all body points in inertial frame</p></li><li><p><code>f_ex6d</code>: f_ex3d integrated through all body points on one body and described in 6d spatial vector form</p></li></ul><p><strong>Constructors</strong></p><ul><li><p><code>BodyGrid(bid,np,points)</code>: initialize q_i, v_i, f_ex3d to be Vector of zeros(3),                            f_ex6d to be zeros(6)</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/ruizhi92/Dyn3d.jl/blob/5ffe30201a300b5e450e8e36ab58d428bdc9ada7/src/FluidInteraction.jl#L10-L29">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dyn3d.FluidInteraction.AcquireBodyGridKinematics-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}" href="#Dyn3d.FluidInteraction.AcquireBodyGridKinematics-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}"><code>Dyn3d.FluidInteraction.AcquireBodyGridKinematics</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">AcquireBodyGridKinematics(bd::BodyDyn, bgs::Vector{BodyGrid})</code></pre><p>Given updated bd structure, which contains 3d bs[i].x_i in inertial frame and 6d bs[i].v of each body in the body local frame, return 3d linear q_i and v_i of each body point in the inertial frame.</p></div><a class="source-link" target="_blank" href="https://github.com/ruizhi92/Dyn3d.jl/blob/5ffe30201a300b5e450e8e36ab58d428bdc9ada7/src/FluidInteraction.jl#L134-L140">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dyn3d.FluidInteraction.CutOut2d-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}" href="#Dyn3d.FluidInteraction.CutOut2d-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}"><code>Dyn3d.FluidInteraction.CutOut2d</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">CutOut2d(bd::BodyDyn,bgs::Vector{BodyGrid})</code></pre><p>This function need to be called only once after GenerateBodyGrid for 2d case of flat plates.</p><p>In <code>Dyn3d</code>, bodies are constructed by quadrilateral/triangles(not lines) in x-z plane for both 2d/3d cases. In <code>Whirl</code>, fluid in 2d cases are constructed in x-y plane. Thus to describe plates as lines in x-y space, we cut out the info on the other sides of the plate. Note that verts are formulated in clockwise direction, with the left-bottom corner as origin.</p></div><a class="source-link" target="_blank" href="https://github.com/ruizhi92/Dyn3d.jl/blob/5ffe30201a300b5e450e8e36ab58d428bdc9ada7/src/FluidInteraction.jl#L43-L54">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dyn3d.FluidInteraction.DetermineNP-Tuple{Int64,Float64}" href="#Dyn3d.FluidInteraction.DetermineNP-Tuple{Int64,Float64}"><code>Dyn3d.FluidInteraction.DetermineNP</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">DetermineNP(nbody::Int, Δx)</code></pre><p>Run this function before running GenerateBodyGrid, to determine number of points on a 2d body, in order to satisfy the desired number of points on the 1d body.</p><p>np = (# of points on 1d plate - 1)*4+1. So np=201 has 51 points(1 body), np=101 has 26 points(2 body), np=49 has 13 points(4 body), np=25 has 7 points(8 body), etc.</p></div><a class="source-link" target="_blank" href="https://github.com/ruizhi92/Dyn3d.jl/blob/5ffe30201a300b5e450e8e36ab58d428bdc9ada7/src/FluidInteraction.jl#L71-L82">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dyn3d.FluidInteraction.GenerateBodyGrid-Tuple{Dyn3d.ConstructSystem.BodyDyn}" href="#Dyn3d.FluidInteraction.GenerateBodyGrid-Tuple{Dyn3d.ConstructSystem.BodyDyn}"><code>Dyn3d.FluidInteraction.GenerateBodyGrid</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">GenerateBodyGrid(bd::BodyDyn; np=101)</code></pre><p>Given BodyDyn structure, where each body only consists of several verts(usually 4 for quadrilateral and 3 for triangle), return the verts position in inertial frame of given number of points np by interpolation, of all bodies in the system.</p></div><a class="source-link" target="_blank" href="https://github.com/ruizhi92/Dyn3d.jl/blob/5ffe30201a300b5e450e8e36ab58d428bdc9ada7/src/FluidInteraction.jl#L97-L103">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dyn3d.FluidInteraction.IntegrateBodyGridDynamics-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}" href="#Dyn3d.FluidInteraction.IntegrateBodyGridDynamics-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}"><code>Dyn3d.FluidInteraction.IntegrateBodyGridDynamics</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">IntegrateBodyGridDynamics(bd::BodyDyn, bgs::Vector{BodyGrid})</code></pre><p>Given external 3d linear fluid force f_ex of each body point contained in updated bgs structure, do intergral to return integrated 6d body force([torque,force]) exerting on the beginning of current body, desribed in inertial frame.</p></div><a class="source-link" target="_blank" href="https://github.com/ruizhi92/Dyn3d.jl/blob/5ffe30201a300b5e450e8e36ab58d428bdc9ada7/src/FluidInteraction.jl#L170-L176">source</a></section><h2><a class="nav-anchor" id="Index-1" href="#Index-1">Index</a></h2><ul><li><a href="fluid_interaction.html#Dyn3d.FluidInteraction.BodyGrid"><code>Dyn3d.FluidInteraction.BodyGrid</code></a></li><li><a href="fluid_interaction.html#Dyn3d.FluidInteraction.AcquireBodyGridKinematics-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}"><code>Dyn3d.FluidInteraction.AcquireBodyGridKinematics</code></a></li><li><a href="fluid_interaction.html#Dyn3d.FluidInteraction.CutOut2d-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}"><code>Dyn3d.FluidInteraction.CutOut2d</code></a></li><li><a href="fluid_interaction.html#Dyn3d.FluidInteraction.DetermineNP-Tuple{Int64,Float64}"><code>Dyn3d.FluidInteraction.DetermineNP</code></a></li><li><a href="fluid_interaction.html#Dyn3d.FluidInteraction.GenerateBodyGrid-Tuple{Dyn3d.ConstructSystem.BodyDyn}"><code>Dyn3d.FluidInteraction.GenerateBodyGrid</code></a></li><li><a href="fluid_interaction.html#Dyn3d.FluidInteraction.IntegrateBodyGridDynamics-Tuple{Dyn3d.ConstructSystem.BodyDyn,Array{Dyn3d.FluidInteraction.BodyGrid,1}}"><code>Dyn3d.FluidInteraction.IntegrateBodyGridDynamics</code></a></li></ul><footer><hr/><a class="previous" href="construct_system.html"><span class="direction">Previous</span><span class="title">Construct body-joint system</span></a></footer></article></body></html>
